<library-resource_list>
    <div class="row">
        <div class="col col-xs-2">{ header.year }</div>
        <div class="col col-xs-3">{ header.name }</div>
        <div class="col col-xs-4">{ header.description }</div>
        <div class="col col-xs-1">{ header.cover }</div>
        <div class="col col-xs-1">{ header.pubtype_id }</div>
        <div class="col col-xs-1">{ header.user_id }</div>
    </div>
    <div class="row" each="{ resource in resources() }">
        <div class="col col-xs-2">{ resource.year }</div>

        <div class="col col-xs-3">
            <div class="row" each="{ label, code in resource.name }">
                <div class="col col-xs-12"><p>{label} <span class="small">{code}</span></p>
                </div>
            </div>
        </div>

        <div class="col col-xs-4">
            <div class="row" each="{ label, code in resource.description }">
                <div class="col col-xs-12"><p>{label} <span class="small">{code}</span></p>
                </div>
            </div>
        </div>

        <div class="col col-xs-1">{ resource.cover }</div>
        <div class="col col-xs-1">{ resource.pubtype_id }</div>
        <div class="col col-xs-1">{ resource.user_id }</div>
    </div>

    <style>
        library-resource_list .small {
            color: #a3a3a3;
        }
    </style>

    <script type="text/javascript">
        var tag = this;
        tag.store = stores.resource;
        tag.header = {
            id:'id',
            description:'description',
            pubtype_id: 'Publication type'
        };
        tag.on('mount', function(){

            tag.opts = _.defaults(tag.opts, {
                page: 1,
                per_page:10
            });


            tag.store.on('resources_restored', function(){
                tag.update()});
        });

        tag.fn = {
            display:{
                name: function(name){return JSON.stringify(name)}
            }
        }

        tag.on('update', function(){
            tag.resources = tag.store.resources
        })
    </script>

</library-resource_list>